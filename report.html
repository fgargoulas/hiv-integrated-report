<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Integrado VIH | HIV Integrated Report</title>
    <link rel="icon" type="image/png" sizes="32x32" href="./assets/img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./assets/img/favicon-16x16.png">
    <link rel="icon" href="./assets/img/favicon.png">
    <link rel="apple-touch-icon" href="./assets/img/apple-touch-icon.png">
    <!-- Web App Manifest -->
    <link rel="manifest" href="./manifest.json">
    <!-- Color de tema para navegadores móviles -->
    <meta name="theme-color" content="#0d6efd">
    <link rel="stylesheet" href="./vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="./vendor/bootstrap-icons/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./vendor/datatables/datatables.min.css">
    <link rel="stylesheet" href="./vendor/datatables/dataTables.bootstrap5.css">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="./assets/css/theme-standford_original.css">  
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    

</head>
<body class="bg-light">

  <!-- MAIN CONTENT -->
  <main class="container my-4" id="reportContainer">
    <!-- Loader inicial -->
    <div id="loader" class="text-center py-5">
      <div class="spinner-border text-primary" role="status"></div>
      <p class="mt-3 text-secondary">Generando informe...</p>
    </div>

    <!-- Contenido dinámico -->
    <div id="reportContent" class="d-none bg-white border rounded p-3">
      <!-- Cabecera -->
    <section id="patientHeader" class="mb-4">
      <header class="report-header d-flex justify-content-between align-items-start">
        <!--  LOGOS -->
          <div class="logo-stack d-flex flex-column align-items-start gap-1">
            <a id="logo_up_link" href="#" class="logo-link" target="_blank" rel="noopener">
              <img id="logo_up" class="img-fluid report-logo" alt="Logo corporativo">
            </a>
            <a id="logo_down_link" href="#" class="logo-link" target="_blank" rel="noopener">
              <img id="logo_down" class="img-fluid report-logo" alt="Logo HIVDB">
            </a>
          </div>

        <!-- DERECHA: INFO DEL PACIENTE -->
        <div class="patient-info text-end align-self-center">
          <div id="patientbox_name" class="fw-bold fs-4"></div>
          <div id="patientbox_identifiers"  class="fs-5"></div>
          <div id="patientbox_info_dem" class="fs-5"></div>
          <div id="patientbox_info_hiv" class="fs-5"></div>
          <div id="patientbox_info_hiv2" class="fs-4"></div>
          <div id="institution_info" class="fs-5 text-info institution-info"></div>
        </div>
      </header>
</section>

      <!-- Tabla mutaciones -->
        <div class="row">
            <div class="col-md-12">
              <!-- start: Resistencias -->
              <div class="card mb-4" id="panel_resStudies">

                <!-- Encabezado -->
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0" id="res_total">Evolución de estudios de resistencia</h5>
                  <h4 class="mb-0 ms-auto"><span class="badge bg-primary ms-1" id="hiv_type">Tipo VIH</span> <span class="badge ms-1" id="hla_text">HLA</span> </h4>

                </div>

                <!-- Cuerpo colapsable -->
                <div class="card-body" id="resStudies_body">
                  <table class="table table-bordered table-striped text-center" id="datatable-resStudies">
                    <thead>
                      <tr>
                        <th width="10%" class="text-center">Fecha</th>
                        <th width="35%" class="text-center" id="mut-rt">Mutaciones TRANSCRIPTASA INVERSA</th>
                        <th width="35%" class="text-center" id="mut-pt">Mutaciones PROTEASA</th>
                        <th width="20%" class="text-center" id="mut-in">Mutaciones INTEGRASA</th>
                      </tr>
                    </thead>
                    <tbody>
                    </tbody>
                  </table>
                </div>

              </div>
              <!-- end: Resistencias -->
            </div>
          </div>




      
      <!-- Standford -->
        <div class="row">
            <div class="col-md-12">
              <div class="card mb-4" id="panel_standford">
                <!-- Encabezado -->
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0" id="targa_total">Informe Standford HIVDB  a fecha <span class="badge bg-secondary ms-1" id="request_date" title="Fecha de la solicitud de los datos a API de HIVDB de Standford" ></span></h5>
                   <h4 class="mb-0 ms-auto">
                    <span class="badge bg-info ms-1" id="version_info" title="Versión del algoritmo de HIVDB de Standford" data-bs-toggle='tooltip' data-bs-trigger='hover' data-bs-placement='right'></span>
                   <span class="badge bg-info ms-1" id="program_info" title="Versión Programa"  data-bs-toggle='tooltip' data-bs-trigger='hover' data-bs-placement='right'></span>
                  </h4>

                </div>
                <!-- Cuerpo colapsable -->
                <div class="card-body" id="standford_body">
                 <span class="d-print-none fst-italic">* Recuerde todos los elementos marcados con asterisco ofrecen información importante adicional al pasar el ratón por encima.</span>
                 <div id="PageStandfordReport"></div>
                </div>

              </div>
              <!-- end: TargaChart -->
            </div>
        </div>

      <!-- Gráfica -->
        <div class="row">
            <div class="col-md-12">
              <div class="card mb-4" id="panel_targaChart">

                <!-- Encabezado -->
                <div class="card-header d-flex justify-content-between align-items-center">
                  <h5 class="mb-0" id="targa_total">Evolución de tratamientos </h5>
                  <h5 class="mb-0 ms-auto">Total TARGA Histórico: <span class="badge bg-primary ms-1" id="TARGA_total"></span> 
                  TARGA Activo:<span class="badge bg-warning ms-1" id="TARGA_active"></span> </h5>
                </div>

                <!-- Cuerpo colapsable -->
                <div class="card-body" id="targaChart_body">
                 <div id="targaChartContainer" >
                    <div id="chartARV" class="chartdiv"  style="height: 300px;"></div>
                    <div id="chartARV-print-div" ><img id="chartARV-print" alt="Timeline ARV" ></div>
                 </div>
                </div>

              </div>
              <!-- end: TargaChart -->
            </div>
        </div>
      


    </div>
  </main>

  <!-- FOOTER -->
  <footer class="text-center py-4 border-top small text-muted">
    Proyecto académico UNIR · HIV Integrated Report · 2025
  </footer>

  <!-- Bootstrap JS -->
  <script src="./vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <!-- Datatables -->
  <script src="./vendor/datatables/datatables.min.js"></script>


  

<!-------------------------Page specific Vendor Functions graphics -------------------------->
		<script src="./vendor/amcharts/core.js"></script>
		<script src="./vendor/amcharts/charts.js"></script>
		<script src="./vendor/amcharts/themes/dataviz.js"></script>
		<script src="./vendor/amcharts/themes/animated.js"></script>
		<script src="./vendor/amcharts/themes/material.js"></script>
		<script src="./vendor/amcharts/plugins/timeline.js"></script>
		<script src="./vendor/amcharts/plugins/bullets.js"></script>
		<script src="./vendor/amcharts/plugins/overlapBuster.js"></script> 
		
		

  <!-- Librerías propias -->
  <script src="./src/core/core.js"></script>
  <script src="./src/ui/ux.js"></script>

  <!-- Script principal de inicialización -->
   <script src="./src/report.js"></script>
  
</body>
</html>